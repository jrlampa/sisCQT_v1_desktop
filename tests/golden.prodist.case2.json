{
  "name": "gd_reverse_flow",
  "input": {
    "scenarioId": "PRODIST_GOLDEN_2",
    "params": {
      "trafoKva": 75,
      "profile": "Massivos",
      "classType": "Automatic",
      "manualClass": "B",
      "normativeTable": "PRODIST",
      "includeGdInQt": true
    },
    "cables": {
      "CABO_A": {
        "r": 0.32,
        "x": 0.08,
        "coef": 0.0891,
        "ampacity": 250
      }
    },
    "ips": {
      "Sem IP": 0,
      "LED 10W": 0.01
    },
    "nodes": [
      {
        "id": "TRAFO",
        "parentId": "",
        "meters": 0,
        "cable": "CABO_A",
        "loads": {
          "mono": 0,
          "bi": 0,
          "tri": 0,
          "pointQty": 0,
          "pointKva": 0,
          "ipType": "Sem IP",
          "ipQty": 0,
          "solarKva": 0,
          "solarQty": 0
        }
      },
      {
        "id": "P1",
        "parentId": "TRAFO",
        "meters": 200,
        "cable": "CABO_A",
        "loads": {
          "mono": 2,
          "bi": 0,
          "tri": 0,
          "pointQty": 0,
          "pointKva": 0,
          "ipType": "Sem IP",
          "ipQty": 0,
          "solarKva": 0,
          "solarQty": 0
        }
      },
      {
        "id": "P2",
        "parentId": "P1",
        "meters": 150,
        "cable": "CABO_A",
        "loads": {
          "mono": 1,
          "bi": 0,
          "tri": 0,
          "pointQty": 0,
          "pointKva": 0,
          "ipType": "Sem IP",
          "ipQty": 0,
          "solarKva": 50,
          "solarQty": 1
        }
      }
    ]
  },
  "expected": {
    "scenarioId": "PRODIST_GOLDEN_2",
    "kpis": {
      "totalLoad": 4.8,
      "diversifiedLoad": 4.8,
      "pointLoad": 0,
      "ipLoad": 0,
      "trafoOccupation": 6.4,
      "maxCqt": 0.5702,
      "totalCustomers": 3,
      "globalDmdiFactor": 1.6
    },
    "gdImpact": {
      "totalInstalledKva": 50,
      "maxVoltageRise": 15.2717,
      "hasReverseFlow": true,
      "reverseFlowAmps": 75.2401,
      "selfConsumptionRate": 30
    },
    "warnings": [],
    "nodes": [
      {
        "id": "P1",
        "parentId": "TRAFO",
        "meters": 200,
        "cable": "CABO_A",
        "loads": {
          "mono": 2,
          "bi": 0,
          "tri": 0,
          "pointKva": 0,
          "ipType": "Sem IP",
          "ipQty": 0,
          "solarKva": 0
        },
        "subtreeTotalKva": 4.8,
        "subtreeTotalSolarKva": 50,
        "nodeDistributedKva": 3.2,
        "nodeConcentratedKva": 0,
        "nodeSolarKva": 0,
        "calculatedLoad": 7.2931,
        "accumulatedCqt": 0.5702,
        "solarVoltageRise": 8.6534,
        "jouleLossWatts": 10.2122,
        "netCurrentDay": -73.7815
      },
      {
        "id": "P2",
        "parentId": "P1",
        "meters": 150,
        "cable": "CABO_A",
        "loads": {
          "mono": 1,
          "bi": 0,
          "tri": 0,
          "pointKva": 0,
          "ipType": "Sem IP",
          "ipQty": 0,
          "solarKva": 50
        },
        "subtreeTotalKva": 1.6,
        "subtreeTotalSolarKva": 50,
        "nodeDistributedKva": 1.6,
        "nodeConcentratedKva": 0,
        "nodeSolarKva": 50,
        "calculatedLoad": 2.431,
        "accumulatedCqt": 0.5702,
        "solarVoltageRise": 15.2717,
        "jouleLossWatts": 0.851,
        "netCurrentDay": -75.2401
      },
      {
        "id": "TRAFO",
        "parentId": "",
        "meters": 0,
        "cable": "CABO_A",
        "loads": {
          "mono": 0,
          "bi": 0,
          "tri": 0,
          "pointKva": 0,
          "ipType": "Sem IP",
          "ipQty": 0,
          "solarKva": 0
        },
        "subtreeTotalKva": 4.8,
        "subtreeTotalSolarKva": 50,
        "nodeDistributedKva": 0,
        "nodeConcentratedKva": 0,
        "nodeSolarKva": 0,
        "calculatedLoad": 7.2931,
        "accumulatedCqt": 0,
        "solarVoltageRise": 0
      }
    ]
  }
}

